<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVTW1307T1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-EVTW1307T1');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laravel ORM Eloquent</title>
  <script src="/course-resources/index.js" defer></script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script src="https://kit.fontawesome.com/a7cd9537ed.js" crossorigin="anonymous"></script>
  <script src="../index.js" defer></script>
  <script src="../menu.js" defer></script>
  <!-- <link rel="stylesheet" href="../index.css"> -->
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../menu.css">
</head>


<body>


  <nav id="vc-rail" class="vc-rail" aria-hidden="true">
    <div class="vc-rail-head">
      <span class="vc-rail-title">Índice</span>
      <button id="vc-close" class="vc-btn" aria-label="Cerrar menú">
        <!-- X SVG -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>
    </div>
    <ul id="vc-list" class="vc-list"></ul>
  </nav>

  <div id="vc-backdrop" class="vc-backdrop" hidden></div>
  <!-- ===== /VC SIDEBAR ===== -->

  <header>

    <!-- ===== VC SIDEBAR (desde cero) ===== -->
    <button style="margin-top: 0!important;" id="vc-toggle" class="vc-toggle" aria-label="Mostrar/ocultar menú" aria-controls="vc-rail"
      aria-expanded="false">
      <!--Hamburger icon -->
      <i class="fa fa-bars" aria-hidden="true"></i>


    </button>
    <h1>Laravel ORM Eloquent</h1>
    <img src="" id="logo" alt="Logo" style="display: none;">
  </header>

<main>

<!-- SECCIÓN 1 -->
<section id="introduccion">
<h2>1. Introducción a Eloquent ORM</h2>

<p>
<strong>Eloquent</strong> es el ORM de Laravel. Permite trabajar con la base de datos
mediante <strong>modelos PHP</strong>, evitando escribir SQL directamente.
Cada modelo representa una tabla.
</p>

<div class="diagram">
    <img src="../assets/laravel_orm.png" style="max-width:35%;" alt="Laravel Logo">
</div>
</section>

<!-- SECCIÓN 2 -->
<section id="model">
<h2>2. Modelos Eloquent</h2>

<h3>2.1. Crear un modelo</h3>

<pre><code class="language-bash">
php artisan make:model Hotel
</code></pre>

<h3>2.2. Modelo básico</h3>

<pre><code class="language-php">
namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Hotel extends Model
{
    protected $table = 'hoteles';

    protected $fillable = [
        'nombre',
        'direccion'
    ];
}
</code></pre>

<h3>2.3. Uso básico del modelo</h3>

<pre><code class="language-php">
// Insertar
Hotel::create([
    'nombre' => 'Gran Hotel',
    'direccion' => 'Calle Mayor 3'
]);

// Consultar
$hoteles = Hotel::all();

// Buscar por ID
$hotel = Hotel::find(1);

// Eliminar
Hotel::destroy(1);
</code></pre>
</section>

<!-- SECCIÓN 3 -->
<section id="eloquent-crud">
<h2>3. CRUD con Eloquent</h2>

<h3>3.1. CREATE</h3>
<pre><code class="language-php">
Hotel::create([
    'nombre' => 'Hotel Central',
    'direccion' => 'Avenida Principal 10'
]);
</code></pre>

<h3>3.2. READ</h3>
<pre><code class="language-php">
$hoteles = Hotel::where('nombre', 'like', '%Hotel%')->get();
</code></pre>

<h3>3.3. UPDATE</h3>
<pre><code class="language-php">
$hotel = Hotel::find(1);
$hotel->direccion = 'Nueva dirección';
$hotel->save();
</code></pre>

<h3>3.4. DELETE</h3>
<pre><code class="language-php">
$hotel = Hotel::find(1);
$hotel->delete();
</code></pre>
</section>

<!-- SECCIÓN 4 -->
<section id="factory">
<h2>4. Factories con Eloquent</h2>

<h3>4.1. Crear modelo + factory</h3>

<pre><code class="language-bash">
php artisan make:model Hotel -mf
</code></pre>

<h3>4.2. Factory con Faker</h3>

<pre><code class="language-php">
namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;

class HotelFactory extends Factory
{
    public function definition(): array
    {
        return [
            'nombre' => $this->faker->company(),
            'direccion' => $this->faker->address(),
        ];
    }
}
</code></pre>

<h3>4.3. Usar la factory</h3>

<pre><code class="language-php">
use App\Models\Hotel;

// Crear un registro
Hotel::factory()->create();

// Crear varios registros
Hotel::factory()->count(10)->create();
</code></pre>
</section>

<!-- SECCIÓN 5 -->
<section id="relaciones">
<h2>5. Relaciones Eloquent</h2>

<h3>5.1. Relación 1:N</h3>

<pre><code class="language-php">
// Hotel.php
public function habitaciones()
{
    return $this->hasMany(Habitacion::class);
}
</code></pre>

<pre><code class="language-php">
// Habitacion.php
public function hotel()
{
    return $this->belongsTo(Hotel::class);
}
</code></pre>

<h3>5.2. Uso de la relación</h3>

<pre><code class="language-php">
$hotel = Hotel::find(1);

foreach ($hotel->habitaciones as $habitacion) {
    echo $habitacion->numero;
}
</code></pre>
</section>

<!-- SECCIÓN 6 -->
<section id="seed">
<h2>6. Seeders con Eloquent</h2>

<h3>6.1. Crear seeder</h3>

<pre><code class="language-bash">
php artisan make:seeder HotelSeeder
</code></pre>

<h3>6.2. Seeder usando Factory</h3>

<pre><code class="language-php">
use App\Models\Hotel;

class HotelSeeder extends Seeder
{
    public function run(): void
    {
        Hotel::factory()->count(20)->create();
    }
}
</code></pre>

<h3>6.3. Ejecutar seeders</h3>

<pre><code class="language-bash">
php artisan db:seed
</code></pre>
</section>

<!-- DIAGRAMA -->
<section>
<h2>Diagrama conceptual</h2>

<div class="mermaid">
classDiagram
class Hotel {
    id
    nombre
    direccion
}
class Habitacion {
    id
    numero
    hotel_id
}
Hotel "1" --> "*" Habitacion
</div>
</section>

<!-- RESUMEN -->
<section>
<div class="info-box">
<h3>Resumen rápido</h3>

<table border="1" style="width:100%; border-collapse:collapse;">
<tr><th>Elemento</th><th>Función</th></tr>
<tr><td>Model</td><td>Representa una tabla</td></tr>
<tr><td>Eloquent</td><td>ORM de Laravel</td></tr>
<tr><td>Factory</td><td>Genera datos con Faker</td></tr>
<tr><td>Seeder</td><td>Inserta datos automáticamente</td></tr>
<tr><td>CRUD</td><td>Operaciones con objetos</td></tr>
</table>
</div>
</section>

</main>

<footer>
<p>&copy; Stucom 2025-26. Todos los derechos reservados.</p>
</footer>
</body>
</html>
