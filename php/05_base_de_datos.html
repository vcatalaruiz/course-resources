<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVTW1307T1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-EVTW1307T1');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base de Datos en PHP</title>
    <script src="/course-resources/index.js" defer></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script src="https://kit.fontawesome.com/a7cd9537ed.js" crossorigin="anonymous"></script>
    <script src="../index.js" defer></script>
    <script src="../menu.js" defer></script>
    <!-- <link rel="stylesheet" href="../index.css"> -->
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="../menu.css">
</head>


<body>

    <nav id="vc-rail" class="vc-rail" aria-hidden="true">
        <div class="vc-rail-head">
            <span class="vc-rail-title">칈ndice</span>
            <button id="vc-close" class="vc-btn" aria-label="Cerrar men칰">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
        </div>
        <ul id="vc-list" class="vc-list"></ul>
    </nav>

    <div id="vc-backdrop" class="vc-backdrop" hidden></div>

    <header>
        <button style="margin-top: 0!important;" id="vc-toggle" class="vc-toggle" aria-label="Mostrar/ocultar men칰"
            aria-controls="vc-rail" aria-expanded="false">
            <i class="fa fa-bars" aria-hidden="true"></i>
        </button>
        <h1>Base de Datos MySQL en PHP</h1>
        <img src="" id="logo" alt="Logo" style="display: none;">
    </header>

    <main>

        <!-- SECCI칍N 1: INTRODUCCI칍N -->
        <section id="introduccion">
            <h2>1. Introducci칩n a bases de datos en PHP</h2>
            <p>Una <strong>base de datos</strong> es un sistema que permite guardar, organizar y recuperar informaci칩n de forma eficiente.</p>
            
            <p>En PHP se usan bases de datos para:</p>
            <ul>
                <li>Usuarios y contrase침as 游댏</li>
                <li>Productos, pedidos, reservas 游</li>
                <li>Posts, comentarios, mensajes 游눫</li>
                <li>Cualquier informaci칩n que deba persistir entre sesiones</li>
            </ul>
            
            <p><strong>游녤 La m치s habitual con PHP es MySQL / MariaDB.</strong></p>
             <div class="diagram">
                <img src="../assets/php_sql_diagram.png" style="max-width: 75%;" width="auto"
                alt="diagrama php con sql" />
            </div>            
            <p>PHP permite conectarse a bases de datos MySQL usando dos extensiones principales: <strong>MySQLi</strong>
                (MySQL Improved) y <strong>PDO</strong> (PHP Data Objects). Ambas ofrecen funcionalidades similares pero
                con diferencias importantes en sintaxis y compatibilidad.</p>

            <h3>1.1. 쯇or qu칠 usar bases de datos?</h3>
            <ul>
                <li>Almacenar grandes cantidades de datos de forma estructurada</li>
                <li>Persistencia de datos entre sesiones</li>
                <li>Acceso concurrente de m칰ltiples usuarios</li>
                <li>B칰squedas y consultas complejas eficientes</li>
                <li>Integridad y seguridad de datos</li>
            </ul>

            <h3>1.2. MySQLi vs PDO</h3>
            <table>
                <thead>
                    <tr>
                        <th>Caracter칤stica</th>
                        <th>MySQLi</th>
                        <th>PDO</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Soporte de bases de datos</td>
                        <td>Solo MySQL</td>
                        <td>12+ bases de datos (MySQL, PostgreSQL, SQLite, etc.)</td>
                    </tr>
                    <tr>
                        <td>Estilo de programaci칩n</td>
                        <td>Orientado a objetos y procedural</td>
                        <td>Solo orientado a objetos</td>
                    </tr>
                    <tr>
                        <td>Prepared Statements</td>
                        <td>S칤</td>
                        <td>S칤</td>
                    </tr>
                    <tr>
                        <td>Named parameters</td>
                        <td>No (solo ?)</td>
                        <td>S칤 (? y :nombre)</td>
                    </tr>
                    <tr>
                        <td>Portabilidad</td>
                        <td>Baja</td>
                        <td>Alta</td>
                    </tr>
                    <tr>
                        <td>Rendimiento</td>
                        <td>Ligeramente m치s r치pido</td>
                        <td>Similar</td>
                    </tr>
                </tbody>
            </table>
             <div class="diagram">
                <img src="../assets/php_sqli_vs_pdo.png" style="max-width: 75%;" width="auto"
                alt="pdo vs sqli" />
            </div>  

            

            <h3>1.3. Requisitos previos</h3>
            <ul>
                <li>Servidor MySQL instalado y corriendo</li>
                <li>PHP con extensi칩n mysqli o PDO habilitada</li>
                <li>Credenciales de acceso (host, usuario, contrase침a, base de datos)</li>
            </ul>
        </section>

        <!-- SECCI칍N 2: CONEXI칍N CON MYSQLI -->
        <section id="mysqli-conexion">
            <h2>2. Conexi칩n con MySQLi</h2>

            <h3>2.1. Conexi칩n b치sica</h3>
            <pre><code class="language-php">
&lt;?php
// Datos de conexi칩n
$host = "localhost";
$usuario = "root";
$password = "";
$base_datos = "mi_base_datos";

// Crear conexi칩n
$conexion = new mysqli($host, $usuario, $password, $base_datos);

// Verificar conexi칩n
if ($conexion->connect_error) {
    die("Error de conexi칩n: " . $conexion->connect_error);
}

echo "Conexi칩n exitosa";

// Establecer charset UTF-8
$conexion->set_charset("utf8mb4");

// Cerrar conexi칩n
$conexion->close();
?&gt;
</code></pre>            
        </section>

        <!-- SECCI칍N 3: CONEXI칍N CON PDO -->
        <section id="pdo-conexion">
            <h2>3. Conexi칩n con PDO</h2>

            <h3>3.1. Conexi칩n b치sica</h3>
            <pre><code class="language-php">
&lt;?php
$host = "localhost";
$db_name = "mi_base_datos";
$usuario = "root";
$password = "";

try {
    // DSN (Data Source Name)
    $dsn = "mysql:host=$host;dbname=$db_name;charset=utf8mb4";
    
    // Opciones de PDO
    $opciones = [
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,  // Modo de errores
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,  // Modo de fetch
        PDO::ATTR_EMULATE_PREPARES => false  // No emular prepared statements
    ];
    
    // Crear conexi칩n
    $pdo = new PDO($dsn, $usuario, $password, $opciones);
    
    echo "Conexi칩n exitosa";
    
} catch (PDOException $e) {
    die("Error de conexi칩n: " . $e->getMessage());
}
?&gt;
</code></pre>

            <h3>3.2. Clase de conexi칩n reutilizable</h3>
            <pre><code class="language-php">
&lt;?php
// Database.php

class Database {
    private $host = "localhost";
    private $db_name = "mi_base_datos";
    private $usuario = "root";
    private $password = "";
    private $conexion;

    public function getConexion() {
        $this->conexion = null;
        
        try {
            $dsn = "mysql:host=" . $this->host . ";dbname=" . $this->db_name . ";charset=utf8mb4";
            
            $opciones = [
                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES => false
            ];
            
            $this->conexion = new PDO($dsn, $this->usuario, $this->password, $opciones);
            
        } catch(PDOException $e) {
            echo "Error de conexi칩n: " . $e->getMessage();
        }
        
        return $this->conexion;
    }
}
?&gt;

&lt;!-- Uso --&gt;
&lt;?php
require_once 'Database.php';

$database = new Database();
$conn = $database->getConexion();
?&gt;
</code></pre>

            <h3>3.3. Opciones importantes de PDO</h3>
            <pre><code class="language-php">
&lt;?php
$opciones = [
    // Modo de errores: lanzar excepciones
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
    
    // Modo de fetch por defecto: array asociativo
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
    
    // No emular prepared statements (m치s seguro)
    PDO::ATTR_EMULATE_PREPARES => false,
    
    // Conexiones persistentes (reutilizar conexiones)
    PDO::ATTR_PERSISTENT => true,
    
    // Timeout de conexi칩n (segundos)
    PDO::ATTR_TIMEOUT => 5
];

$pdo = new PDO($dsn, $usuario, $password, $opciones);
?&gt;
</code></pre>
        </section>

        <!-- SECCI칍N 4: CONSULTAS SELECT CON MYSQLI -->
        <section id="mysqli-select">
            <h2>4. Consultas SELECT con MySQLi</h2>

            <h3>4.1. Consulta simple</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

// Ejecutar consulta
$sql = "SELECT id, nombre, email FROM usuarios";
$resultado = $conexion->query($sql);

// Verificar si hay resultados
if ($resultado->num_rows > 0) {
    // Recorrer resultados
    while ($fila = $resultado->fetch_assoc()) {
        echo "ID: " . $fila['id'] . " - ";
        echo "Nombre: " . $fila['nombre'] . " - ";
        echo "Email: " . $fila['email'] . "&lt;br&gt;";
    }
} else {
    echo "No se encontraron resultados";
}

// Liberar resultado
$resultado->free();
$conexion->close();
?&gt;
</code></pre>

            <h3>4.2. Prepared Statements (prevenir SQL Injection)</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

// Preparar consulta
$sql = "SELECT id, nombre, email FROM usuarios WHERE id = ?";
$stmt = $conexion->prepare($sql);

// Vincular par치metros (tipos: i=integer, s=string, d=double, b=blob)
$id = 5;
$stmt->bind_param("i", $id);

// Ejecutar
$stmt->execute();

// Obtener resultados
$resultado = $stmt->get_result();

while ($fila = $resultado->fetch_assoc()) {
    echo "Nombre: " . $fila['nombre'] . "&lt;br&gt;";
}

$stmt->close();
$conexion->close();
?&gt;
</code></pre>

            <h3>4.3. M칰ltiples par치metros</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

$sql = "SELECT * FROM usuarios WHERE edad > ? AND ciudad = ?";
$stmt = $conexion->prepare($sql);

$edad = 18;
$ciudad = "Madrid";
$stmt->bind_param("is", $edad, $ciudad);  // i=integer, s=string

$stmt->execute();
$resultado = $stmt->get_result();

while ($fila = $resultado->fetch_assoc()) {
    echo $fila['nombre'] . " - " . $fila['edad'] . " a침os&lt;br&gt;";
}

$stmt->close();
$conexion->close();
?&gt;
</code></pre>

            <h3>4.4. Obtener un solo resultado</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

$sql = "SELECT nombre, email FROM usuarios WHERE id = ?";
$stmt = $conexion->prepare($sql);

$id = 10;
$stmt->bind_param("i", $id);
$stmt->execute();

// Vincular variables de resultado
$stmt->bind_result($nombre, $email);

// Obtener valores
if ($stmt->fetch()) {
    echo "Nombre: $nombre&lt;br&gt;";
    echo "Email: $email&lt;br&gt;";
} else {
    echo "Usuario no encontrado";
}

$stmt->close();
$conexion->close();
?&gt;
</code></pre>
        </section>

        <!-- SECCI칍N 5: CONSULTAS SELECT CON PDO -->
        <section id="pdo-select">
            <h2>5. Consultas SELECT con PDO</h2>

            <h3>5.1. Consulta simple</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // Ejecutar consulta
    $sql = "SELECT id, nombre, email FROM usuarios";
    $stmt = $pdo->query($sql);
    
    // Recorrer resultados
    while ($fila = $stmt->fetch()) {
        echo "ID: " . $fila['id'] . " - ";
        echo "Nombre: " . $fila['nombre'] . " - ";
        echo "Email: " . $fila['email'] . "&lt;br&gt;";
    }
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>

            <h3>5.2. Prepared Statements con marcadores posicionales (?)</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // Preparar consulta
    $sql = "SELECT * FROM usuarios WHERE id = ?";
    $stmt = $pdo->prepare($sql);
    
    // Ejecutar con par치metros
    $id = 5;
    $stmt->execute([$id]);
    
    // Obtener resultados
    while ($fila = $stmt->fetch()) {
        echo "Nombre: " . $fila['nombre'] . "&lt;br&gt;";
    }
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>

            <h3>5.3. Prepared Statements con par치metros nombrados (:nombre)</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // Preparar con par치metros nombrados
    $sql = "SELECT * FROM usuarios WHERE edad > :edad AND ciudad = :ciudad";
    $stmt = $pdo->prepare($sql);
    
    // Ejecutar con array asociativo
    $stmt->execute([
        ':edad' => 18,
        ':ciudad' => 'Barcelona'
    ]);
    
    // Obtener todos los resultados
    $usuarios = $stmt->fetchAll();
    
    foreach ($usuarios as $usuario) {
        echo $usuario['nombre'] . " - " . $usuario['edad'] . " a침os&lt;br&gt;";
    }
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>

            <h3>5.4. Diferentes modos de fetch</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $sql = "SELECT * FROM usuarios WHERE id = ?";
    $stmt = $pdo->prepare($sql);
    $stmt->execute([5]);
    
    // FETCH_ASSOC: Array asociativo
    $usuario = $stmt->fetch(PDO::FETCH_ASSOC);
    echo $usuario['nombre'];
    
    // FETCH_OBJ: Objeto
    $stmt->execute([5]);
    $usuario = $stmt->fetch(PDO::FETCH_OBJ);
    echo $usuario->nombre;
    
    // FETCH_NUM: Array num칠rico
    $stmt->execute([5]);
    $usuario = $stmt->fetch(PDO::FETCH_NUM);
    echo $usuario[1];  // Segunda columna
    
    // fetchAll(): Todos los resultados
    $sql = "SELECT * FROM usuarios";
    $stmt = $pdo->query($sql);
    $todos = $stmt->fetchAll(PDO::FETCH_ASSOC);
    
    // fetchColumn(): Una sola columna
    $sql = "SELECT COUNT(*) FROM usuarios";
    $total = $pdo->query($sql)->fetchColumn();
    echo "Total usuarios: $total";
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>
        </section>

        <!-- SECCI칍N 6: INSERT, UPDATE, DELETE CON MYSQLI -->
        <section id="mysqli-crud">
            <h2>6. INSERT, UPDATE, DELETE con MySQLi</h2>

            <h3>6.1. INSERT - Insertar datos</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

// INSERT con prepared statement
$sql = "INSERT INTO usuarios (nombre, email, edad) VALUES (?, ?, ?)";
$stmt = $conexion->prepare($sql);

$nombre = "Juan P칠rez";
$email = "juan@ejemplo.com";
$edad = 30;

$stmt->bind_param("ssi", $nombre, $email, $edad);

if ($stmt->execute()) {
    echo "Registro insertado correctamente&lt;br&gt;";
    echo "ID del nuevo registro: " . $conexion->insert_id;
} else {
    echo "Error: " . $stmt->error;
}

$stmt->close();
$conexion->close();
?&gt;
</code></pre>

            <h3>6.2. UPDATE - Actualizar datos</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

$sql = "UPDATE usuarios SET nombre = ?, email = ? WHERE id = ?";
$stmt = $conexion->prepare($sql);

$nombre = "Mar칤a Garc칤a";
$email = "maria@ejemplo.com";
$id = 5;

$stmt->bind_param("ssi", $nombre, $email, $id);

if ($stmt->execute()) {
    echo "Registro actualizado correctamente&lt;br&gt;";
    echo "Filas afectadas: " . $stmt->affected_rows;
} else {
    echo "Error: " . $stmt->error;
}

$stmt->close();
$conexion->close();
?&gt;
</code></pre>

            <h3>6.3. DELETE - Eliminar datos</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

$sql = "DELETE FROM usuarios WHERE id = ?";
$stmt = $conexion->prepare($sql);

$id = 10;
$stmt->bind_param("i", $id);

if ($stmt->execute()) {
    if ($stmt->affected_rows > 0) {
        echo "Registro eliminado correctamente";
    } else {
        echo "No se encontr칩 el registro";
    }
} else {
    echo "Error: " . $stmt->error;
}

$stmt->close();
$conexion->close();
?&gt;
</code></pre>

            <h3>6.4. Insertar m칰ltiples registros</h3>
            <pre><code class="language-php">
&lt;?php
$conexion = new mysqli("localhost", "root", "", "mi_base_datos");

$sql = "INSERT INTO usuarios (nombre, email, edad) VALUES (?, ?, ?)";
$stmt = $conexion->prepare($sql);

// Array de datos
$usuarios = [
    ["Ana L칩pez", "ana@ejemplo.com", 25],
    ["Carlos Ruiz", "carlos@ejemplo.com", 32],
    ["Laura Torres", "laura@ejemplo.com", 28]
];

$stmt->bind_param("ssi", $nombre, $email, $edad);

foreach ($usuarios as $usuario) {
    $nombre = $usuario[0];
    $email = $usuario[1];
    $edad = $usuario[2];
    $stmt->execute();
}

echo "Registros insertados: " . count($usuarios);

$stmt->close();
$conexion->close();
?&gt;
</code></pre>
        </section>

        <!-- SECCI칍N 7: INSERT, UPDATE, DELETE CON PDO -->
        <section id="pdo-crud">
            <h2>7. INSERT, UPDATE, DELETE con PDO</h2>

            <h3>7.1. INSERT - Insertar datos</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    $sql = "INSERT INTO usuarios (nombre, email, edad) VALUES (:nombre, :email, :edad)";
    $stmt = $pdo->prepare($sql);
    
    $stmt->execute([
        ':nombre' => 'Pedro Mart칤nez',
        ':email' => 'pedro@ejemplo.com',
        ':edad' => 35
    ]);
    
    echo "Registro insertado correctamente&lt;br&gt;";
    echo "ID del nuevo registro: " . $pdo->lastInsertId();
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>

            <h3>7.2. UPDATE - Actualizar datos</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    $sql = "UPDATE usuarios SET nombre = :nombre, email = :email WHERE id = :id";
    $stmt = $pdo->prepare($sql);
    
    $stmt->execute([
        ':nombre' => 'Isabel Fern치ndez',
        ':email' => 'isabel@ejemplo.com',
        ':id' => 5
    ]);
    
    echo "Registro actualizado correctamente&lt;br&gt;";
    echo "Filas afectadas: " . $stmt->rowCount();
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>

            <h3>7.3. DELETE - Eliminar datos</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    $sql = "DELETE FROM usuarios WHERE id = :id";
    $stmt = $pdo->prepare($sql);
    
    $stmt->execute([':id' => 10]);
    
    if ($stmt->rowCount() > 0) {
        echo "Registro eliminado correctamente";
    } else {
        echo "No se encontr칩 el registro";
    }
    
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?&gt;
</code></pre>

            <h3>7.4. Transacciones</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // Iniciar transacci칩n
    $pdo->beginTransaction();
    
    // Operaci칩n 1
    $sql1 = "INSERT INTO usuarios (nombre, email) VALUES (?, ?)";
    $stmt1 = $pdo->prepare($sql1);
    $stmt1->execute(['Usuario 1', 'user1@ejemplo.com']);
    
    // Operaci칩n 2
    $sql2 = "UPDATE cuentas SET saldo = saldo - 100 WHERE id = ?";
    $stmt2 = $pdo->prepare($sql2);
    $stmt2->execute([1]);
    
    // Si todo es correcto, confirmar
    $pdo->commit();
    echo "Transacci칩n completada exitosamente";
    
} catch (PDOException $e) {
    // Si hay error, revertir cambios
    $pdo->rollBack();
    echo "Error en la transacci칩n: " . $e->getMessage();
}
?&gt;
</code></pre>
        </section>

        <!-- SECCI칍N 8: EJEMPLO COMPLETO CRUD -->
        <section id="ejemplo-crud">
            <h2>8. Ejemplo completo: Sistema CRUD</h2>

            <h3>8.1. Listar usuarios (index.php)</h3>
            <pre><code class="language-php">
&lt;?php
// Conexi칩n PDO
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // Obtener todos los usuarios
    $sql = "SELECT * FROM usuarios ORDER BY id DESC";
    $stmt = $pdo->query($sql);
    $usuarios = $stmt->fetchAll();
    
} catch (PDOException $e) {
    die("Error: " . $e->getMessage());
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Lista de Usuarios&lt;/title&gt;
    &lt;style&gt;
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Lista de Usuarios&lt;/h1&gt;
    &lt;a href="crear.php"&gt;Agregar Nuevo Usuario&lt;/a&gt;
    
    &lt;table&gt;
        &lt;tr&gt;
            &lt;th&gt;ID&lt;/th&gt;
            &lt;th&gt;Nombre&lt;/th&gt;
            &lt;th&gt;Email&lt;/th&gt;
            &lt;th&gt;Edad&lt;/th&gt;
            &lt;th&gt;Acciones&lt;/th&gt;
        &lt;/tr&gt;
        &lt;?php foreach ($usuarios as $usuario): ?&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;?php echo htmlspecialchars($usuario['id']); ?&gt;&lt;/td&gt;
            &lt;td&gt;&lt;?php echo htmlspecialchars($usuario['nombre']); ?&gt;&lt;/td&gt;
            &lt;td&gt;&lt;?php echo htmlspecialchars($usuario['email']); ?&gt;&lt;/td&gt;
            &lt;td&gt;&lt;?php echo htmlspecialchars($usuario['edad']); ?&gt;&lt;/td&gt;
            &lt;td&gt;
                &lt;a href="editar.php?id=&lt;?php echo $usuario['id']; ?&gt;"&gt;Editar&lt;/a&gt; |
                &lt;a href="eliminar.php?id=&lt;?php echo $usuario['id']; ?&gt;" 
                   onclick="return confirm('쮼st치s seguro?')"&gt;Eliminar&lt;/a&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;?php endforeach; ?&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

            <h3>8.2. Crear usuario (crear.php)</h3>
            <pre><code class="language-php">
&lt;?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    try {
        $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        
        $sql = "INSERT INTO usuarios (nombre, email, edad) VALUES (:nombre, :email, :edad)";
        $stmt = $pdo->prepare($sql);
        
        $stmt->execute([
            ':nombre' => $_POST['nombre'],
            ':email' => $_POST['email'],
            ':edad' => $_POST['edad']
        ]);
        
        header("Location: index.php");
        exit;
        
    } catch (PDOException $e) {
        $error = "Error: " . $e->getMessage();
    }
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Crear Usuario&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Crear Nuevo Usuario&lt;/h1&gt;
    
    &lt;?php if (isset($error)): ?&gt;
        &lt;p style="color: red;"&gt;&lt;?php echo $error; ?&gt;&lt;/p&gt;
    &lt;?php endif; ?&gt;
    
    &lt;form method="POST"&gt;
        &lt;label&gt;Nombre:&lt;/label&gt;
        &lt;input type="text" name="nombre" required&gt;&lt;br&gt;&lt;br&gt;
        
        &lt;label&gt;Email:&lt;/label&gt;
        &lt;input type="email" name="email" required&gt;&lt;br&gt;&lt;br&gt;
        
        &lt;label&gt;Edad:&lt;/label&gt;
        &lt;input type="number" name="edad" required&gt;&lt;br&gt;&lt;br&gt;
        
        &lt;button type="submit"&gt;Guardar&lt;/button&gt;
        &lt;a href="index.php"&gt;Cancelar&lt;/a&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

            <h3>8.3. Editar usuario (editar.php)</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    $id = $_GET['id'] ?? 0;
    
    if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        // Actualizar
        $sql = "UPDATE usuarios SET nombre = :nombre, email = :email, edad = :edad WHERE id = :id";
        $stmt = $pdo->prepare($sql);
        
        $stmt->execute([
            ':nombre' => $_POST['nombre'],
            ':email' => $_POST['email'],
            ':edad' => $_POST['edad'],
            ':id' => $id
        ]);
        
        header("Location: index.php");
        exit;
    }
    
    // Obtener datos del usuario
    $sql = "SELECT * FROM usuarios WHERE id = :id";
    $stmt = $pdo->prepare($sql);
    $stmt->execute([':id' => $id]);
    $usuario = $stmt->fetch();
    
    if (!$usuario) {
        die("Usuario no encontrado");
    }
    
} catch (PDOException $e) {
    die("Error: " . $e->getMessage());
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Editar Usuario&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Editar Usuario&lt;/h1&gt;
    
    &lt;form method="POST"&gt;
        &lt;label&gt;Nombre:&lt;/label&gt;
        &lt;input type="text" name="nombre" value="&lt;?php echo htmlspecialchars($usuario['nombre']); ?&gt;" required&gt;&lt;br&gt;&lt;br&gt;
        
        &lt;label&gt;Email:&lt;/label&gt;
        &lt;input type="email" name="email" value="&lt;?php echo htmlspecialchars($usuario['email']); ?&gt;" required&gt;&lt;br&gt;&lt;br&gt;
        
        &lt;label&gt;Edad:&lt;/label&gt;
        &lt;input type="number" name="edad" value="&lt;?php echo htmlspecialchars($usuario['edad']); ?&gt;" required&gt;&lt;br&gt;&lt;br&gt;
        
        &lt;button type="submit"&gt;Actualizar&lt;/button&gt;
        &lt;a href="index.php"&gt;Cancelar&lt;/a&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

            <h3>8.4. Eliminar usuario (eliminar.php)</h3>
            <pre><code class="language-php">
&lt;?php
try {
    $pdo = new PDO("mysql:host=localhost;dbname=mi_base_datos", "root", "");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    $id = $_GET['id'] ?? 0;
    
    $sql = "DELETE FROM usuarios WHERE id = :id";
    $stmt = $pdo->prepare($sql);
    $stmt->execute([':id' => $id]);
    
    header("Location: index.php");
    exit;
    
} catch (PDOException $e) {
    die("Error: " . $e->getMessage());
}
?&gt;
</code></pre>
        </section>

        <!-- RESUMEN -->
        <section id="resumen">
            <div class="info-box">
                <h3>Resumen de Base de Datos en PHP</h3>
                <ul>
                    <li><strong>MySQLi</strong> solo funciona con MySQL; <strong>PDO</strong> es compatible con
                        m칰ltiples bases de datos</li>
                    <li>Usar <strong>prepared statements</strong> siempre para prevenir SQL Injection</li>
                    <li>MySQLi usa <strong>?</strong> como marcador; PDO permite <strong>?</strong> y
                        <strong>:nombre</strong></li>
                    <li><strong>mysqli->insert_id</strong> o <strong>pdo->lastInsertId()</strong> obtienen el 칰ltimo ID
                        insertado</li>
                    <li><strong>affected_rows</strong> o <strong>rowCount()</strong> indican filas afectadas</li>
                    <li>PDO permite <strong>transacciones</strong> con beginTransaction(), commit() y rollBack()</li>
                    <li>Siempre usar <strong>try-catch</strong> con PDO para manejar errores</li>
                    <li>Establecer <strong>charset UTF-8</strong> para evitar problemas de caracteres</li>
                    <li>Usar <strong>htmlspecialchars()</strong> al mostrar datos de la base de datos</li>
                    <li>PDO es m치s recomendado por su <strong>portabilidad</strong> y caracter칤sticas avanzadas</li>
                </ul>
            </div>
        </section>

    </main>

</body>

</html>